\documentclass[12pt]{article}

\usepackage[dutch]{babel}
\usepackage{graphics}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{eurosym}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{tabto}
\NumTabs{10}

\begin{document}

\begin{titlepage}
\begin{center}

\textsc{\LARGE Universiteit Utrecht}\\[1.6cm]

\textsc{\Large Programmeren in de Wiskunde}\vspace{2pc}

{\huge \bfseries Verslag Eindopdracht}
\vspace{3pc}

\begin{minipage}{0.7\textwidth}
\begin{flushleft} \large
\emph{Begeleider:} \\
Emiel \textsc{Broeders} 
\end{flushleft}
\begin{flushleft} \large
\emph{Auteurs:}\\
Wessel \textsc{van Eeghen} \tab\#4007557\\
Mathijs \textsc{de Lepper}  \tab\#3987949\\
Jurriaan \textsc{Parie}  \tab\tab\#3938549
\end{flushleft}
\end{minipage}
\begin{minipage}{0.4\textwidth}
\end{minipage}
\vspace{10pc} 

\textsc{\Large Expressieboom}\\[4.0cm]
{\large \today}
\end{center}
\end{titlepage}

\newpage

\section{Inleiding}


\section{De Opdracht}
We hebben de aangeleverde code aanzienlijk uitgebreid. Naast de lijst met standaard functionaliteiten hebben we ook elementen toegevoegd uit de lijst met Extra mogelijkheden. Daarnaast hebben we nog een aantal (eigen) functies buiten de lijst om toegevoegd. Hieronder worden alle aanpassingen besproken en we lichten per functionaliteit het een en ander toe.

\subsection*{Standaard Aanpassingen}
\begin{itemize}
\item \textbf{Het vertalen van een Expressie naar een string} \\
haakjes stukje?

\item \textbf{Gelijke bomen} \\
We willen twee bomen kunnen vergelijken. Dit doen we door in de verschillende klassen een overload van \texttt{def\_\_eq\_\_} te gebruiken. Op deze manier worden de twee expressiebomen vanaf een \textit{top-down} approach bekeken en vergeleken.
\begin{align*}
&\texttt{a = Expression.fromString('3sin(x)'))}\\
&\texttt{>>> print(a)}\\
&\texttt{3 * sin(x)}\\
&\texttt{b = Expression.fromString('sin(x)3')}\\
&\texttt{>>> print(b)}\\
&\texttt{sin(x) * 3}\\
&\texttt{>>> a == b}\\
&\texttt{False}
\end{align*}


\item \textbf{De klasse Variable} \\
Om ook variabelen te ondersteunen hebben we een klasse \textit{Variable} geschreven, als subklasse van \textit{Constant}. Hierin staat een constructor en een overload van  \texttt{def \_\_str\_\_}, die zichzelf als waarde teruggeeft en een overload van \texttt{def evaluate}. Als er een waarde is meegegeven voor de variabele, dan willen we deze waarde gebruiken in de berekening. Als dit niet het geval is, dan moet de variabele als variabele worden teruggegeven.
\begin{align*}
&\texttt{a = Expression.fromString('3sin(x)'))}\\
&\texttt{>>> a.evaluate()}\\
&\texttt{'3.0 * sin(x)'}\\
&\texttt{>>> a.evaluate({'x':math.pi/2})}\\
&\texttt{3.0}\\
\end{align*}

\item \textbf{Evaluate}\\
Zoals in het voorgaande stukje te zien is, kunnen we numerieke waarden van expressies berekenen. Dit doen we door middel van een functie \textit{evaluate}. In \textit{Expressie}, de hoofd-/superklasse van de code, hoeft er nog niks te gebeuren. We gebruiken daarom een \textit{pass} en overloaden de methode in de subklassen van \textit{Expressie}. Zo willen we bijvoorbeeld bij de klasse \textit{BinaryNode}, dat (recursief) de linker- en rechterkant worden ge\"{e}valueerd. Afhankelijk van wat de zogeheten \textit{child} teruggeeft willen we een uiteindelijke waarde of expressie teruggeven aan de oproep. Dit houdt bijvoorbeeld in dat een constante zijn eigen waarde teruggeeft en een variabele \textit{x} geeft \'{o}f \textit{x} terug \'{o}f de waarde die voor \textit{x} is meegegeven in de vorm van een \textit{dictionary}.


\newpage
\subsection*{Extra Aanpassingen}

\item \textbf{Expression from String}
We hebben een functie \textit{post\_tokenize} toegevoegd. Deze maakt het mogelijk om bij het gebruik van \textit{ExpressionfromString} een functie in te voeren zonder *-tekens te gebruiken tussen getallen en variabelen/functies. Om te voorkomen dat bijvoorbeeld \textit{sin} wordt opgebroken in \textit{s*i*n}, hebben we een methode \textit{infunclist} gedefin\"{i}eerd. Hierdoor kunnen we met een \textit{bool} checken of een deel van de string een bekende functie is of niet. Uiteindelijk kunnen we onder andere het volgende doen:
\begin{align*}
&\texttt{>>> b = Expression.fromString('3xylog(ab) +5'))}\\
&\texttt{>>> print(b)}\\
&\texttt{3 * x * y * log(a * b) + 5}
\end{align*}

\item \textbf{Gedeeltelijke evaluatie}\\
Aangezien sommige functies meerdere variabelen gebruiken, willen we het mogelijk maken om een expressie gedeeltelijk te kunnen evalueren. Als we bijvoorbeeld de functie die hierboven staat gedeeltelijk willen evalueren, krijgen we bijv:
\begin{align*}
&\texttt{>>> b.evaluate(\{'a':3, 'b':2\})}\\
&\texttt{'3.0 * x * y * 1.791759469228055 + 5.0'}
\end{align*}

\item \textbf{Nulpunten vinden}\\
Het leek ons ook wel mooi om nulpunten te kunnen vinden van (simpele) expressies/functies. Dit hebben we gedaan door middel van het importeren van het programma \textit{bisection}. Dit programma was een inleveropdracht en het leek ons wel mooi om hier iets mee te doen. Hier volgt een klein voorbeeldje:
\begin{align*}
&\texttt{b = Expression.fromString('x*x - 4')}\\
&\texttt{>>> b.findRoots('x', -3, 4, 0.001)}\\
&\texttt{[-1.99981689453125, 2.00006103515625]}
\end{align*}

\item \textbf{Bekende en Onbekende Functies - de Unaire Boom} \\
Om niet alle elementen uit een berekening in een binaire boom te hoeven plaatsen, hebben we de unaire boom geintroduceerd. Dit biedt de mogelijkheid om ook functies in een berekening op te nemen. Deze unaire boom heeft slecht \'e\'en kind, hetgeen de functie evalueert. Dit kind kan zowel een binaire- danwel een unaire boom zijn. Zo is het mogelijk dat berekeningen met functies in functies ge\"evalueerd kunnen worden.
\begin{align*}
&\texttt{>>> Expression.fromString('sin x ** sinh log x + 3')}\\
&\texttt{sin(x) ** sinh(log(x)) + 3}
\end{align*}

\item \textbf{Negatie} \\
Het $-$ teken kent een dubbele betekenis. In het geval van \textit{negatie} vervangen we het $-$ teken in onze berekening door een $\sim$ om het vervolgens als een functie beschouwen. 
\begin{align*}
&\texttt{>>> expr =  print(Expression.fromString('-x / y + -sin -x'))}\\
&\texttt{-x / y + -sin(-x)}\\
%&\texttt{>>> print(expr.evaluate({'x':1.57, 'y':3.14}))}\\
%&\texttt{0.4999996829318346}
\end{align*}
\end{itemize}

\newpage
\section{Taakverdeling}

\begin{center}
    \begin{tabular}{ | l | p{4cm}  | p{4cm} | p{4cm} |}
    \hline
    Dag & Jurriaan & Mathijs & Wessel \\ \hline
    11 juni & Carri\`eremiddag & Carri\`eremiddag & Code begrijpen \\ \hline
    16 juni & Presentatie + Code begrijpen & Presentatie + EvaluateFunction voor alles behalve variabelen & Nieuwe operatoren  $(-, *, /, **$ etc.$)$ \\ \hline
    18 juni & Begin variabelen in de expressieboom & EvaluateFunction afmaken & Reduceren van haakjes \\ \hline
    23 juni & Standaard en onbepaalde functies & Versimpeling en GitHub & Extra omschrijving + GitHub \\ \hline
    25 juni & Functies afmaken, begin negatie & \texttt{4log(sin(3xy))} is nu \texttt{4*log(sin(3*x*y))} & Versimpeling van de boom en versimpeling van de uitdrukkingen \\ \hline
    30 juni & Negatie is af en functies zonder haakjes & Bisection ge\"{i}mporteerd (werkt voor simpele functies) en PEP8 & Versimpelen is nu af \\ \hline
    3 juli & Verslag & Verslag & Verslag \\
    \hline
    \end{tabular}
\end{center}

\section{Discussie}
Waarom we ervoor gekozen hebben om bijvoorbeeld wel negatie te doen en niet differenti\"eren.


\section{Reflectie}

\begin{thebibliography}{9}
\bibitem{ftcs}
https://nl.wikipedia.org/wiki/Shunting-yardalgoritme
\end{thebibliography}


\end{document}